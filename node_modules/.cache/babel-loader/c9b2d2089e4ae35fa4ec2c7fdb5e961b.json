{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/captainspring/Desktop/code/WebSocket/myproject/clientx/src/Components/ChatBox/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './index.css';\nimport ChatBoxStatusRoom from '../ChatBoxStatusRoom/index';\nimport ChatBoxMessageBox from '../ChatBoxMessageBox/index';\nimport ChatBoxTextMesBtn from '../ChatBoxTextMesBtn/index';\nimport { Redirect, useParams } from 'react-router-dom';\nimport io from 'socket.io-client';\nimport { GET_URL_FOR_SOCKET } from '../../Config/index';\nlet socket;\n\nconst Index = () => {\n  _s();\n\n  const param = useParams();\n  const username = localStorage.getItem('username');\n  const [messages, setMessages] = useState([]);\n  const {\n    room\n  } = param;\n  useEffect(() => {\n    socket = io(GET_URL_FOR_SOCKET);\n    socket.emit('join', username, room);\n  }, [param]);\n  useEffect(() => {\n    socket.on('message', user_text => {\n      setMessages([...messages, user_text]);\n    });\n  }, [messages]);\n\n  const sendMessage = msg => {\n    socket.emit('sendMessage', msg);\n    let [month, day, year] = new Date().toLocaleDateString('en-US').split('/');\n    let [hour, minute, second] = new Date().toLocaleTimeString('en-US').split(/:| /);\n    setMessages([...messages, {\n      username: username,\n      text: msg,\n      date: {\n        day: day,\n        month: month,\n        year: year,\n        hour: hour\n      }\n    }]);\n  };\n\n  return localStorage.getItem('username') === null ? /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 3\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"body\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"main\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"message-board\",\n        children: [/*#__PURE__*/_jsxDEV(ChatBoxStatusRoom, {\n          room: param.room\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ChatBoxMessageBox, {\n          messages: messages,\n          username: username,\n          room: room\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ChatBoxTextMesBtn, {\n          sendMessage: sendMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Index, \"1GFcSFfR+ApdSwg4FJaYnZeMBK0=\", false, function () {\n  return [useParams];\n});\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["/home/captainspring/Desktop/code/WebSocket/myproject/clientx/src/Components/ChatBox/index.js"],"names":["React","useEffect","useState","ChatBoxStatusRoom","ChatBoxMessageBox","ChatBoxTextMesBtn","Redirect","useParams","io","GET_URL_FOR_SOCKET","socket","Index","param","username","localStorage","getItem","messages","setMessages","room","emit","on","user_text","sendMessage","msg","month","day","year","Date","toLocaleDateString","split","hour","minute","second","toLocaleTimeString","text","date"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './index.css'\nimport ChatBoxStatusRoom from '../ChatBoxStatusRoom/index'\nimport ChatBoxMessageBox from '../ChatBoxMessageBox/index'\nimport ChatBoxTextMesBtn from '../ChatBoxTextMesBtn/index'\nimport { Redirect, useParams } from 'react-router-dom'\nimport io from 'socket.io-client'\nimport { GET_URL_FOR_SOCKET } from '../../Config/index'\nlet socket\nconst Index = () => {\n\tconst param = useParams()\n\tconst username = localStorage.getItem('username')\n\tconst [messages, setMessages] = useState([])\n\tconst { room } = param\n\tuseEffect(() => {\n\t\tsocket = io(GET_URL_FOR_SOCKET)\n\t\tsocket.emit('join', username, room)\n\t}, [param])\n\n\tuseEffect(() => {\n\t\tsocket.on('message', (user_text) => {\n\t\t\tsetMessages([...messages, user_text])\n\t\t})\n\t}, [messages])\n\tconst sendMessage = (msg) => {\n\t\tsocket.emit('sendMessage', msg)\n\t\tlet [month, day, year] = new Date()\n\t\t\t.toLocaleDateString('en-US')\n\t\t\t.split('/')\n\t\tlet [hour, minute, second] = new Date()\n\t\t\t.toLocaleTimeString('en-US')\n\t\t\t.split(/:| /)\n\t\tsetMessages([\n\t\t\t...messages,\n\t\t\t{\n\t\t\t\tusername: username,\n\t\t\t\ttext: msg,\n\t\t\t\tdate: {\n\t\t\t\t\tday :day,\n\t\t\t\t\tmonth : month,\n\t\t\t\t\tyear : year,\n\t\t\t\t\thour : hour\n\t\t\t\t},\n\t\t\t},\n\t\t])\n\t}\n\treturn localStorage.getItem('username') === null ? (\n\t\t<Redirect to='/' />\n\t) : (\n\t\t<div class='body'>\n\t\t\t<div class='main'>\n\t\t\t\t<div class='message-board'>\n\t\t\t\t\t<ChatBoxStatusRoom room={param.room} />\n\t\t\t\t\t<ChatBoxMessageBox\n\t\t\t\t\t\tmessages={messages}\n\t\t\t\t\t\tusername={username}\n\t\t\t\t\t\troom={room}\n\t\t\t\t\t/>\n\t\t\t\t\t<ChatBoxTextMesBtn sendMessage={sendMessage} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Index\n"]},"metadata":{},"sourceType":"module"}